{"version":3,"file":"vue.js","sources":["../src/compiler/parse.js","../src/compiler/index.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["const attribute =\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\nconst dynamicArgAttribute =\n  /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+?\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 匹配开始标签 [1] 为标签的名字\nconst startTagClose = /^\\s*(\\/?)>/;\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\nconst doctype = /^<!DOCTYPE [^>]+>/i;\n// #7298: escape - to avoid being passed as HTML comment when inlined in page\nconst comment = /^<!\\--/;\nconst conditionalComment = /^<!\\[/;\n\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{ aaa }} 匹配到表达式变量\n\n/**\n * 匹配到一个删除一个，直到没有\n * 参考：https://www.npmjs.com/package/htmlparser2\n * @param {*} html\n * @return {*}\n */\nexport function parseHTML(html) {\n  const ELEMENT_TYPE = 3;\n  const TEXT_TYPE = 1;\n  const stack = []; // 用于存放元素，从而构建抽象语法树 （栈的最后一个元素就是下一个元素的父元素）\n  let currentParent; // 指向栈的最后一个\n  let root;\n\n  function createASTElement(tag, attrs) {\n    return {\n      tag,\n      type: ELEMENT_TYPE,\n      children: [],\n      attrs,\n      parent: null,\n    };\n  }\n\n  // 前进，删除匹配过的数据\n  function advance(n) {\n    html = html.substring(n);\n  }\n\n  function parseStartTag() {\n    const start = html.match(startTagOpen);\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: [],\n      };\n      advance(start[0].length);\n      // console.log(`[index] start match`, match, html);\n      // 如果不是结束标签就一直匹配下去\n      let attr = html.match(attribute);\n      let end = html.match(startTagClose);\n\n      while (!end && attr) {\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5] || true,\n        });\n        advance(attr[0].length);\n        end = html.match(startTagClose);\n        attr = html.match(attribute);\n      }\n      // 删除结束标签\n      if (end) {\n        advance(end[0].length);\n      }\n      return match;\n    }\n    return false;\n  }\n\n  function handleStart(tag, attrs) {\n    const node = createASTElement(tag, attrs);\n    // 检查树的根节点\n    if (!root) {\n      root = node;\n    }\n    if (currentParent) {\n      node.parent = currentParent;\n      currentParent.children.push(node);\n    }\n\n    stack.push(node);\n    currentParent = node;\n  }\n\n  // 文本节点直接放到当前指向的节点\n  function handleText(content) {\n    const text = content.replace(/\\s/g, \"\");\n    if (!text) return;\n    const node = {\n      text,\n      type: TEXT_TYPE,\n      parent: currentParent,\n    };\n    currentParent.children.push(node);\n  }\n\n  function handleEnd(tag) {\n    const node = stack.pop();\n    if (node.tag !== tag) {\n      throw Error(\"tag 不匹配 \");\n    }\n    currentParent = stack[stack.length - 1];\n  }\n\n  // html 的开始肯定是 < 符号\n  while (html) {\n    /**\n     * <div>111</div>\n     * 如果值为 0：标签的开始\n     * 不为0: 文本的结束位置 （111）\n     */\n    let textEnd = html.indexOf(\"<\");\n    if (textEnd === 0) {\n      const startTagMatch = parseStartTag();\n      if (startTagMatch) {\n        handleStart(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n\n      const endTagMatch = html.match(endTag);\n\n      if (endTagMatch) {\n        handleEnd(endTagMatch[1]);\n        advance(endTagMatch[0].length);\n        continue;\n      }\n      // break;\n    }\n\n    if (textEnd > 0) {\n      const text = html.substring(0, textEnd);\n      if (text) {\n        handleText(text);\n        advance(text.length);\n      }\n    }\n  }\n  return root;\n}\n","import { parseHTML } from \"./parse\";\n\nexport function compileToFunction(template) {\n  // 1. 将 template 转换成 ast\n  const ast = parseHTML(template);\n  console.log(\"ast:\", ast);\n  // 2. 生成 render 方法(render 的返回值就是 虚拟 DOM)\n}\n","// 重写数组中的部分方法\n\nlet oldArrayProto = Array.prototype;\n\nlet newArrayProto = Object.create(oldArrayProto);\n\nconst methods = [\n  \"push\",\n  \"pop\",\n  \"shift\",\n  \"unshift\",\n  \"reverse\",\n  \"sort\",\n  \"splice\",\n];\n\nmethods.forEach((method) => {\n  newArrayProto[method] = function (...args) {\n    const result = oldArrayProto[method].apply(this, args);\n\n    const ob = this.__ob__;\n    // 劫持数组新增的内容\n    let inserted;\n    switch (method) {\n      case \"push\":\n      case \"unshift\":\n        inserted = args;\n        break;\n      case \"splice\":\n        inserted = args.slice(2);\n      default:\n        break;\n    }\n\n    if (inserted) {\n      ob.observeArray(inserted);\n    }\n\n    console.log(`[array] 劫持了数组的方法`);\n    return result;\n  };\n});\n\nexport { newArrayProto };\n","import { newArrayProto } from \"./array\";\n\nclass Observer {\n  constructor(data) {\n    // Object.defineProperty 只能劫持存在的属性，新增的 删除的检测不到\n\n    // 将当前对象的实例挂载到 data 上，为了 在 array.js 文件中重写方法时 能调用到 ob 的方法\n    // data.__ob__ = this; 不能这样写，因为在遍历对象的时候会死循环\n    Object.defineProperty(data, \"__ob__\", {\n      value: this,\n      enumerable: false,\n    });\n\n    // 数组很少用下标的方式来修改，而这样遍历劫持又回很浪费性能，所以不对数组下标劫持\n    if (Array.isArray(data)) {\n      /**\n       * 一般对数组操作用 push、shift、等 7个方法。\n       * 我们可以重写这些方法，保留其他方法\n       */\n      data.__proto__ = newArrayProto;\n\n      this.observeArray(data); // 数组中的对象也要被监测\n    } else {\n      this.walk(data);\n    }\n  }\n\n  walk(data) {\n    // ”重新定义“ 属性 vue2 的性能瓶颈\n    Object.keys(data).forEach((key) => defineReactive(data, key, data[key]));\n  }\n\n  observeArray(arr) {\n    arr.forEach((item) => observe(item));\n  }\n}\n/**\n * 属性劫持\n * @param {*} target\n * @param {*} key\n * @param {*} val\n */\nexport function defineReactive(target, key, val) {\n  // 递归深度劫持\n  observe(val);\n  // 闭包 会将 val 存在 defineReactive 这个作用域里\n  Object.defineProperty(target, key, {\n    get() {\n      return val;\n    },\n    set(newVal) {\n      if (newVal === val) return;\n      // 当重新赋值时，新值也要进行劫持\n      observe(newVal);\n      val = newVal;\n    },\n  });\n}\n\nexport function observe(data) {\n  // 仅仅对对象进行劫持\n  if (data === null || typeof data !== \"object\") {\n    return;\n  }\n\n  // 被监测过的不在监听\n  if (data.__ob__ instanceof Observer) {\n    return data.__ob__;\n  }\n\n  return new Observer(data);\n}\n","import { observe } from \"./observe/index\";\n\nfunction initState(vm) {\n  const opts = vm.$options;\n  if (opts.data) {\n    initData(vm);\n  }\n}\n\n// 代理取值 vm.name => vm._data.name\nfunction proxy(vm, target, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[target][key];\n    },\n    set(nv) {\n      vm[target][key] = nv;\n    },\n  });\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data;\n\n  // vue 根实例的 data 可以是对象、函数。 组件里的 data 必须是函数\n  data = typeof data === \"function\" ? data.call(vm) : data;\n\n  vm._data = data;\n\n  // 数据劫持 defineProperty\n  observe(data);\n\n  for (const key in data) {\n    proxy(vm, \"_data\", key);\n  }\n}\n\nexport { initState };\n","import { compileToFunction } from \"./compiler/index\";\nimport { initState } from \"./state\";\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    // $ 开头的都认为是自己的属性，data 里设置 $name $age 会不生效\n    const vm = this;\n    // 将配置挂载到实例上 方便其他方法访问\n    vm.$options = options;\n\n    initState(vm);\n\n    if (options.el) {\n      vm.$mount(options.el);\n    }\n  };\n\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    const opts = vm.$options;\n    el = document.querySelector(el);\n\n    if (!opts.render) {\n      let template;\n      if (opts.template) {\n        template = opts.template;\n      } else {\n        template = el.outerHTML;\n      }\n      console.log(\"template1: \", template);\n      if (template) {\n        opts.render = compileToFunction(template);\n      }\n    }\n  };\n}\n","import { initMixin } from \"./init\";\n\nfunction Vue(options) {\n  this._init(options);\n}\n\ninitMixin(Vue);\n\nexport default Vue;\n"],"names":["attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHTML","html","ELEMENT_TYPE","TEXT_TYPE","stack","currentParent","root","createASTElement","tag","attrs","type","children","parent","advance","n","substring","parseStartTag","start","match","tagName","length","attr","end","push","name","value","handleStart","node","handleText","content","text","replace","handleEnd","pop","Error","textEnd","indexOf","startTagMatch","endTagMatch","compileToFunction","template","ast","console","log","oldArrayProto","Array","prototype","newArrayProto","Object","create","methods","forEach","method","args","result","apply","ob","__ob__","inserted","slice","observeArray","Observer","data","defineProperty","enumerable","isArray","__proto__","walk","keys","key","defineReactive","arr","item","observe","target","val","get","set","newVal","initState","vm","opts","$options","initData","proxy","nv","call","_data","initMixin","Vue","_init","options","el","$mount","document","querySelector","render","outerHTML"],"mappings":";;;;;;EAAA,IAAMA,SAAS,GACb,2EADF,CAAA;EAIA,IAAMC,MAAM,GAAZ,8BAAA,CAAA;EACA,IAAMC,YAAY,GAAA,MAAA,CAAA,MAAA,CAAUD,MAAV,EAAA,OAAA,CAAA,CAAA,MAAA,CAAwBA,MAAxB,EAAlB,GAAA,CAAA,CAAA;EACA,IAAME,YAAY,GAAG,IAAIC,MAAJ,aAAgBF,YAAhB,CAAA,CAArB;;EACA,IAAMG,aAAa,GAAG,YAAtB,CAAA;EACA,IAAMC,MAAM,GAAG,IAAIF,MAAJ,CAAA,OAAA,CAAA,MAAA,CAAmBF,YAAnB,EAAf,QAAA,CAAA,CAAA,CAAA;;EAQA;EACA;EACA;EACA;EACA;EACA;;EACO,SAASK,SAAT,CAAmBC,IAAnB,EAAyB;IAC9B,IAAMC,YAAY,GAAG,CAArB,CAAA;IACA,IAAMC,SAAS,GAAG,CAAlB,CAAA;EACA,EAAA,IAAMC,KAAK,GAAG,EAAd,CAH8B;;IAI9B,IAAIC,aAAJ,CAJ8B;;EAK9B,EAAA,IAAIC,IAAJ,CAAA;;EAEA,EAAA,SAASC,gBAAT,CAA0BC,GAA1B,EAA+BC,KAA/B,EAAsC;MACpC,OAAO;EACLD,MAAAA,GAAG,EAAHA,GADK;EAELE,MAAAA,IAAI,EAAER,YAFD;EAGLS,MAAAA,QAAQ,EAAE,EAHL;EAILF,MAAAA,KAAK,EAALA,KAJK;EAKLG,MAAAA,MAAM,EAAE,IAAA;OALV,CAAA;EAOD,GAf6B;;;IAkB9B,SAASC,OAAT,CAAiBC,CAAjB,EAAoB;EAClBb,IAAAA,IAAI,GAAGA,IAAI,CAACc,SAAL,CAAeD,CAAf,CAAP,CAAA;EACD,GAAA;;EAED,EAAA,SAASE,aAAT,GAAyB;EACvB,IAAA,IAAMC,KAAK,GAAGhB,IAAI,CAACiB,KAAL,CAAWtB,YAAX,CAAd,CAAA;;EACA,IAAA,IAAIqB,KAAJ,EAAW;EACT,MAAA,IAAMC,KAAK,GAAG;EACZC,QAAAA,OAAO,EAAEF,KAAK,CAAC,CAAD,CADF;EAEZR,QAAAA,KAAK,EAAE,EAAA;SAFT,CAAA;QAIAI,OAAO,CAACI,KAAK,CAAC,CAAD,CAAL,CAASG,MAAV,CAAP,CALS;EAOT;;EACA,MAAA,IAAIC,IAAI,GAAGpB,IAAI,CAACiB,KAAL,CAAWzB,SAAX,CAAX,CAAA;EACA,MAAA,IAAI6B,GAAG,GAAGrB,IAAI,CAACiB,KAAL,CAAWpB,aAAX,CAAV,CAAA;;EAEA,MAAA,OAAO,CAACwB,GAAD,IAAQD,IAAf,EAAqB;EACnBH,QAAAA,KAAK,CAACT,KAAN,CAAYc,IAAZ,CAAiB;EACfC,UAAAA,IAAI,EAAEH,IAAI,CAAC,CAAD,CADK;EAEfI,UAAAA,KAAK,EAAEJ,IAAI,CAAC,CAAD,CAAJ,IAAWA,IAAI,CAAC,CAAD,CAAf,IAAsBA,IAAI,CAAC,CAAD,CAA1B,IAAiC,IAAA;WAF1C,CAAA,CAAA;EAIAR,QAAAA,OAAO,CAACQ,IAAI,CAAC,CAAD,CAAJ,CAAQD,MAAT,CAAP,CAAA;EACAE,QAAAA,GAAG,GAAGrB,IAAI,CAACiB,KAAL,CAAWpB,aAAX,CAAN,CAAA;EACAuB,QAAAA,IAAI,GAAGpB,IAAI,CAACiB,KAAL,CAAWzB,SAAX,CAAP,CAAA;EACD,OAnBQ;;;EAqBT,MAAA,IAAI6B,GAAJ,EAAS;EACPT,QAAAA,OAAO,CAACS,GAAG,CAAC,CAAD,CAAH,CAAOF,MAAR,CAAP,CAAA;EACD,OAAA;;EACD,MAAA,OAAOF,KAAP,CAAA;EACD,KAAA;;EACD,IAAA,OAAO,KAAP,CAAA;EACD,GAAA;;EAED,EAAA,SAASQ,WAAT,CAAqBlB,GAArB,EAA0BC,KAA1B,EAAiC;MAC/B,IAAMkB,IAAI,GAAGpB,gBAAgB,CAACC,GAAD,EAAMC,KAAN,CAA7B,CAD+B;;MAG/B,IAAI,CAACH,IAAL,EAAW;EACTA,MAAAA,IAAI,GAAGqB,IAAP,CAAA;EACD,KAAA;;EACD,IAAA,IAAItB,aAAJ,EAAmB;QACjBsB,IAAI,CAACf,MAAL,GAAcP,aAAd,CAAA;EACAA,MAAAA,aAAa,CAACM,QAAd,CAAuBY,IAAvB,CAA4BI,IAA5B,CAAA,CAAA;EACD,KAAA;;MAEDvB,KAAK,CAACmB,IAAN,CAAWI,IAAX,CAAA,CAAA;EACAtB,IAAAA,aAAa,GAAGsB,IAAhB,CAAA;EACD,GAlE6B;;;IAqE9B,SAASC,UAAT,CAAoBC,OAApB,EAA6B;MAC3B,IAAMC,IAAI,GAAGD,OAAO,CAACE,OAAR,CAAgB,KAAhB,EAAuB,EAAvB,CAAb,CAAA;MACA,IAAI,CAACD,IAAL,EAAW,OAAA;EACX,IAAA,IAAMH,IAAI,GAAG;EACXG,MAAAA,IAAI,EAAJA,IADW;EAEXpB,MAAAA,IAAI,EAAEP,SAFK;EAGXS,MAAAA,MAAM,EAAEP,aAAAA;OAHV,CAAA;EAKAA,IAAAA,aAAa,CAACM,QAAd,CAAuBY,IAAvB,CAA4BI,IAA5B,CAAA,CAAA;EACD,GAAA;;IAED,SAASK,SAAT,CAAmBxB,GAAnB,EAAwB;EACtB,IAAA,IAAMmB,IAAI,GAAGvB,KAAK,CAAC6B,GAAN,EAAb,CAAA;;EACA,IAAA,IAAIN,IAAI,CAACnB,GAAL,KAAaA,GAAjB,EAAsB;QACpB,MAAM0B,KAAK,CAAC,UAAD,CAAX,CAAA;EACD,KAAA;;MACD7B,aAAa,GAAGD,KAAK,CAACA,KAAK,CAACgB,MAAN,GAAe,CAAhB,CAArB,CAAA;EACD,GAtF6B;;;EAyF9B,EAAA,OAAOnB,IAAP,EAAa;EACX;EACJ;EACA;EACA;EACA;EACI,IAAA,IAAIkC,OAAO,GAAGlC,IAAI,CAACmC,OAAL,CAAa,GAAb,CAAd,CAAA;;MACA,IAAID,OAAO,KAAK,CAAhB,EAAmB;QACjB,IAAME,aAAa,GAAGrB,aAAa,EAAnC,CAAA;;EACA,MAAA,IAAIqB,aAAJ,EAAmB;UACjBX,WAAW,CAACW,aAAa,CAAClB,OAAf,EAAwBkB,aAAa,CAAC5B,KAAtC,CAAX,CAAA;EACA,QAAA,SAAA;EACD,OAAA;;EAED,MAAA,IAAM6B,WAAW,GAAGrC,IAAI,CAACiB,KAAL,CAAWnB,MAAX,CAApB,CAAA;;EAEA,MAAA,IAAIuC,WAAJ,EAAiB;EACfN,QAAAA,SAAS,CAACM,WAAW,CAAC,CAAD,CAAZ,CAAT,CAAA;EACAzB,QAAAA,OAAO,CAACyB,WAAW,CAAC,CAAD,CAAX,CAAelB,MAAhB,CAAP,CAAA;EACA,QAAA,SAAA;EACD,OAbgB;;EAelB,KAAA;;MAED,IAAIe,OAAO,GAAG,CAAd,EAAiB;QACf,IAAML,IAAI,GAAG7B,IAAI,CAACc,SAAL,CAAe,CAAf,EAAkBoB,OAAlB,CAAb,CAAA;;EACA,MAAA,IAAIL,IAAJ,EAAU;UACRF,UAAU,CAACE,IAAD,CAAV,CAAA;EACAjB,QAAAA,OAAO,CAACiB,IAAI,CAACV,MAAN,CAAP,CAAA;EACD,OAAA;EACF,KAAA;EACF,GAAA;;EACD,EAAA,OAAOd,IAAP,CAAA;EACD;;EC9IM,SAASiC,iBAAT,CAA2BC,QAA3B,EAAqC;EAC1C;EACA,EAAA,IAAMC,GAAG,GAAGzC,SAAS,CAACwC,QAAD,CAArB,CAAA;EACAE,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBF,GAApB,EAH0C;EAK3C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECPD;EAEA,IAAIG,aAAa,GAAGC,KAAK,CAACC,SAA1B,CAAA;EAEA,IAAIC,aAAa,GAAGC,MAAM,CAACC,MAAP,CAAcL,aAAd,CAApB,CAAA;EAEA,IAAMM,OAAO,GAAG,CACd,MADc,EAEd,KAFc,EAGd,OAHc,EAId,SAJc,EAKd,SALc,EAMd,MANc,EAOd,QAPc,CAAhB,CAAA;EAUAA,OAAO,CAACC,OAAR,CAAgB,UAACC,MAAD,EAAY;EAC1BL,EAAAA,aAAa,CAACK,MAAD,CAAb,GAAwB,YAAmB;EAAA,IAAA,KAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAANC,IAAM,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;QAANA,IAAM,CAAA,IAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA,CAAA;EAAA,KAAA;;EACzC,IAAA,IAAMC,MAAM,GAAGV,aAAa,CAACQ,MAAD,CAAb,CAAsBG,KAAtB,CAA4B,IAA5B,EAAkCF,IAAlC,CAAf,CAAA;EAEA,IAAA,IAAMG,EAAE,GAAG,IAAKC,CAAAA,MAAhB,CAHyC;;EAKzC,IAAA,IAAIC,QAAJ,CAAA;;EACA,IAAA,QAAQN,MAAR;EACE,MAAA,KAAK,MAAL,CAAA;EACA,MAAA,KAAK,SAAL;EACEM,QAAAA,QAAQ,GAAGL,IAAX,CAAA;EACA,QAAA,MAAA;;EACF,MAAA,KAAK,QAAL;EACEK,QAAAA,QAAQ,GAAGL,IAAI,CAACM,KAAL,CAAW,CAAX,CAAX,CAAA;EANJ,KAAA;;EAWA,IAAA,IAAID,QAAJ,EAAc;QACZF,EAAE,CAACI,YAAH,CAAgBF,QAAhB,CAAA,CAAA;EACD,KAAA;;EAEDhB,IAAAA,OAAO,CAACC,GAAR,CAAA,0DAAA,CAAA,CAAA;EACA,IAAA,OAAOW,MAAP,CAAA;KAtBF,CAAA;EAwBD,CAzBD,CAAA;;MCdMO;EACJ,EAAA,SAAA,QAAA,CAAYC,IAAZ,EAAkB;EAAA,IAAA,eAAA,CAAA,IAAA,EAAA,QAAA,CAAA,CAAA;;EAChB;EAEA;EACA;EACAd,IAAAA,MAAM,CAACe,cAAP,CAAsBD,IAAtB,EAA4B,QAA5B,EAAsC;EACpCrC,MAAAA,KAAK,EAAE,IAD6B;EAEpCuC,MAAAA,UAAU,EAAE,KAAA;EAFwB,KAAtC,EALgB;;EAWhB,IAAA,IAAInB,KAAK,CAACoB,OAAN,CAAcH,IAAd,CAAJ,EAAyB;EACvB;EACN;EACA;EACA;QACMA,IAAI,CAACI,SAAL,GAAiBnB,aAAjB,CAAA;EAEA,MAAA,IAAA,CAAKa,YAAL,CAAkBE,IAAlB,CAAA,CAPuB;EAQxB,KARD,MAQO;QACL,IAAKK,CAAAA,IAAL,CAAUL,IAAV,CAAA,CAAA;EACD,KAAA;EACF,GAAA;;;;EAED,IAAA,KAAA,EAAA,SAAA,IAAA,CAAKA,IAAL,EAAW;EACT;QACAd,MAAM,CAACoB,IAAP,CAAYN,IAAZ,EAAkBX,OAAlB,CAA0B,UAACkB,GAAD,EAAA;UAAA,OAASC,cAAc,CAACR,IAAD,EAAOO,GAAP,EAAYP,IAAI,CAACO,GAAD,CAAhB,CAAvB,CAAA;SAA1B,CAAA,CAAA;EACD,KAAA;;;EAED,IAAA,KAAA,EAAA,SAAA,YAAA,CAAaE,GAAb,EAAkB;EAChBA,MAAAA,GAAG,CAACpB,OAAJ,CAAY,UAACqB,IAAD,EAAA;UAAA,OAAUC,OAAO,CAACD,IAAD,CAAjB,CAAA;SAAZ,CAAA,CAAA;EACD,KAAA;;;;;EAEH;EACA;EACA;EACA;EACA;EACA;;;EACO,SAASF,cAAT,CAAwBI,MAAxB,EAAgCL,GAAhC,EAAqCM,GAArC,EAA0C;EAC/C;EACAF,EAAAA,OAAO,CAACE,GAAD,CAAP,CAF+C;;EAI/C3B,EAAAA,MAAM,CAACe,cAAP,CAAsBW,MAAtB,EAA8BL,GAA9B,EAAmC;EACjCO,IAAAA,GADiC,EAC3B,SAAA,GAAA,GAAA;EACJ,MAAA,OAAOD,GAAP,CAAA;OAF+B;MAIjCE,GAJiC,EAAA,SAAA,GAAA,CAI7BC,MAJ6B,EAIrB;EACV,MAAA,IAAIA,MAAM,KAAKH,GAAf,EAAoB,OADV;;QAGVF,OAAO,CAACK,MAAD,CAAP,CAAA;EACAH,MAAAA,GAAG,GAAGG,MAAN,CAAA;EACD,KAAA;KATH,CAAA,CAAA;EAWD,CAAA;EAEM,SAASL,OAAT,CAAiBX,IAAjB,EAAuB;EAC5B;IACA,IAAIA,IAAI,KAAK,IAAT,IAAiB,QAAOA,IAAP,CAAA,KAAgB,QAArC,EAA+C;EAC7C,IAAA,OAAA;EACD,GAJ2B;;;EAO5B,EAAA,IAAIA,IAAI,CAACL,MAAL,YAAuBI,QAA3B,EAAqC;MACnC,OAAOC,IAAI,CAACL,MAAZ,CAAA;EACD,GAAA;;EAED,EAAA,OAAO,IAAII,QAAJ,CAAaC,IAAb,CAAP,CAAA;EACD;;ECrED,SAASiB,SAAT,CAAmBC,EAAnB,EAAuB;EACrB,EAAA,IAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB,CAAA;;IACA,IAAID,IAAI,CAACnB,IAAT,EAAe;MACbqB,QAAQ,CAACH,EAAD,CAAR,CAAA;EACD,GAAA;EACF;;;EAGD,SAASI,KAAT,CAAeJ,EAAf,EAAmBN,MAAnB,EAA2BL,GAA3B,EAAgC;EAC9BrB,EAAAA,MAAM,CAACe,cAAP,CAAsBiB,EAAtB,EAA0BX,GAA1B,EAA+B;EAC7BO,IAAAA,GAD6B,EACvB,SAAA,GAAA,GAAA;EACJ,MAAA,OAAOI,EAAE,CAACN,MAAD,CAAF,CAAWL,GAAX,CAAP,CAAA;OAF2B;MAI7BQ,GAJ6B,EAAA,SAAA,GAAA,CAIzBQ,EAJyB,EAIrB;EACNL,MAAAA,EAAE,CAACN,MAAD,CAAF,CAAWL,GAAX,IAAkBgB,EAAlB,CAAA;EACD,KAAA;KANH,CAAA,CAAA;EAQD,CAAA;;EAED,SAASF,QAAT,CAAkBH,EAAlB,EAAsB;IACpB,IAAIlB,IAAI,GAAGkB,EAAE,CAACE,QAAH,CAAYpB,IAAvB,CADoB;;EAIpBA,EAAAA,IAAI,GAAG,OAAOA,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACwB,IAAL,CAAUN,EAAV,CAA7B,GAA6ClB,IAApD,CAAA;EAEAkB,EAAAA,EAAE,CAACO,KAAH,GAAWzB,IAAX,CANoB;;IASpBW,OAAO,CAACX,IAAD,CAAP,CAAA;;EAEA,EAAA,KAAK,IAAMO,GAAX,IAAkBP,IAAlB,EAAwB;EACtBsB,IAAAA,KAAK,CAACJ,EAAD,EAAK,OAAL,EAAcX,GAAd,CAAL,CAAA;EACD,GAAA;EACF;;EChCM,SAASmB,SAAT,CAAmBC,GAAnB,EAAwB;EAC7BA,EAAAA,GAAG,CAAC3C,SAAJ,CAAc4C,KAAd,GAAsB,UAAUC,OAAV,EAAmB;EACvC;EACA,IAAA,IAAMX,EAAE,GAAG,IAAX,CAFuC;;MAIvCA,EAAE,CAACE,QAAH,GAAcS,OAAd,CAAA;MAEAZ,SAAS,CAACC,EAAD,CAAT,CAAA;;MAEA,IAAIW,OAAO,CAACC,EAAZ,EAAgB;EACdZ,MAAAA,EAAE,CAACa,MAAH,CAAUF,OAAO,CAACC,EAAlB,CAAA,CAAA;EACD,KAAA;KAVH,CAAA;;EAaAH,EAAAA,GAAG,CAAC3C,SAAJ,CAAc+C,MAAd,GAAuB,UAAUD,EAAV,EAAc;MACnC,IAAMZ,EAAE,GAAG,IAAX,CAAA;EACA,IAAA,IAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB,CAAA;EACAU,IAAAA,EAAE,GAAGE,QAAQ,CAACC,aAAT,CAAuBH,EAAvB,CAAL,CAAA;;EAEA,IAAA,IAAI,CAACX,IAAI,CAACe,MAAV,EAAkB;EAChB,MAAA,IAAIxD,QAAJ,CAAA;;QACA,IAAIyC,IAAI,CAACzC,QAAT,EAAmB;UACjBA,QAAQ,GAAGyC,IAAI,CAACzC,QAAhB,CAAA;EACD,OAFD,MAEO;UACLA,QAAQ,GAAGoD,EAAE,CAACK,SAAd,CAAA;EACD,OAAA;;EACDvD,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BH,QAA3B,CAAA,CAAA;;EACA,MAAA,IAAIA,QAAJ,EAAc;EACZyC,QAAAA,IAAI,CAACe,MAAL,GAAczD,iBAAiB,CAACC,QAAD,CAA/B,CAAA;EACD,OAAA;EACF,KAAA;KAhBH,CAAA;EAkBD;;ECjCD,SAASiD,GAAT,CAAaE,OAAb,EAAsB;IACpB,IAAKD,CAAAA,KAAL,CAAWC,OAAX,CAAA,CAAA;EACD,CAAA;;EAEDH,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}